"use strict";!function(e,t){return"function"==typeof define&&define.amd?void define(["angular","ckeditor"],function(e){return t(e)}):t(e)}(angular||null,function(e){var t,n=e.module("ngCkeditor",[]),r=!1;return n.run(["$q","$timeout",function(n,i){function a(){"loaded"===CKEDITOR.status?(r=!0,t.resolve()):a()}if(t=n.defer(),e.isUndefined(CKEDITOR))throw new Error("CKEDITOR not found");CKEDITOR.disableAutoInline=!0,CKEDITOR.on("loaded",a),i(a,100)}]),n.directive("ckeditor",["$timeout","$q",function(n,i){return{restrict:"AC",require:["ngModel","^?form"],scope:!1,link:function(a,o,s,u){var l=u[0],c=u[1]||null,m="<p></p>",p="textarea"===o[0].tagName.toLowerCase(),f=[],d=!1;p||o.attr("contenteditable",!0);var g=function(){var t={toolbar:"full",toolbar_full:[{name:"basicstyles",items:["Bold","Italic","Strike","Underline"]},{name:"paragraph",items:["BulletedList","NumberedList","Blockquote"]},{name:"editing",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"tools",items:["SpellChecker","Maximize"]},"/",{name:"styles",items:["Format","FontSize","TextColor","PasteText","PasteFromWord","RemoveFormat"]},{name:"insert",items:["Image","Table","SpecialChar"]},{name:"forms",items:["Outdent","Indent"]},{name:"clipboard",items:["Undo","Redo"]},{name:"document",items:["PageBreak","Source"]}],disableNativeSpellChecker:!1,uiColor:"#FAFAFA",height:"400px",width:"100%"};t=e.extend(t,a[s.ckeditor]);var r=p?CKEDITOR.replace(o[0],t):CKEDITOR.inline(o[0],t),u=i.defer();o.bind("$destroy",function(){r&&CKEDITOR.instances[r.name]&&CKEDITOR.instances[r.name].destroy()});var g=function(e){var t=r.getData();""===t&&(t=null),n(function(){(e!==!0||t!==l.$viewValue)&&l.$setViewValue(t),e===!0&&c&&c.$setPristine()},0)},h=function(e){if(f.length){var t=f.pop()||m;d=!1,r.setData(t,function(){g(e),d=!0})}};r.on("pasteState",g),r.on("change",g),r.on("blur",g),r.on("instanceReady",function(){a.$broadcast("ckeditor.ready"),a.$apply(function(){h(!0)}),r.document.on("keyup",g)}),r.on("customConfigLoaded",function(){u.resolve()}),l.$render=function(){f.push(l.$viewValue),d&&h()}};"loaded"===CKEDITOR.status&&(r=!0),r?g():t.promise.then(g)}}}]),n});
